{"version":3,"sources":["student-list.js","templates/calcudoku.js","templates/logic.js","templates/light.js","templates/matchstick.js","templates/tangram.js","templates/stick-image.js","classroom-view.js","group.js","puzzle-display.js","index.js"],"names":["StudentList","props","students","useState","displayedStudents","setDisplayedStudents","className","RefreshButton","type","placeholder","onChange","event","query","target","value","split","filteredStudents","filter","first","last","every","pattern","regexp","RegExp","match","map","renderStudent","bind","setStudents","fetchStudentList","a","listurl","process","fetch","headers","authorization","response","ok","json","list","student","find","console","log","status","onClick","active","capitalize","name","id","defaultChecked","string","replace","char","toUpperCase","Calcudoku","data","size","grid","puzzleData","cages","work","Array","fill","index","col","Math","floor","row","matchSquare","squareMatcher","entry","cage","squares","neighbors","neighborList","isTopLeft","square","result","operation","generateGrid","renderSquare","classList","join","disabled","directions","dir","push","Logic","description","Light","workPosition","setWorkPosition","cols","rows","beginstate","neighborType","activatedNeighbors","slice","some","isactive","length","jumpTo","position","JumpBack","jump","StepBack","step","max","StepForward","min","JumpForward","xmlns","width","height","viewBox","toString","d","Matchstick","hideDescription","hideStartPos","canvasRef","useRef","stickWidth","startingConfiguration","draw","useCallback","ctx","clearRect","beginPath","lineWidth","lineCap","strokeStyle","initial","terminal","moveTo","x","y","lineTo","stroke","useEffect","context","current","getContext","ref","Tangram","unitLength","selectionProximity","objective","startingCenter","objectiveCenter","shapes","vertexSelection","shapeSelection","forEach","drawObjective","drawShape","arc","PI","fillStyle","shadowBlur","shadowColor","color","createTangrams","positions","largeTriangle1","center","sin","angle","largeTriangle2","mediumTriangle","sqrt","parallelogram","smallTriangle1","smallTriangle2","createTriangle","createSquare","createParallelogram","createVertex","shape","relAngle","distanceFromCenter","vertex","Object","defineProperty","get","cos","distanceToClosePoint","distanceToFarPoint","triangle","vertices","from","_","i","atan2","firstVertex","point","closePath","adjustedObjective","objectiveStart","objectivePoints","StickImage","style","puzzleComponents","calcudoku","logic","light","matchstick","tangram","ViewWindow","children","containerRef","document","createElement","sourceDoc","targetDoc","viewWindow","window","open","body","appendChild","styleSheets","styleSheet","cssRules","newStyleEl","cssRule","createTextNode","cssText","head","newLinkEl","rel","href","e","close","createPortal","ClassroomView","showStudentNames","renderStudentPuzzle","puzzleName","render","Group","groupNumber","renderStudentDisplay","studentList","postStudentMessage","deleteStudentMessages","members","group","designer","setDesigner","sendMessages","newDesigner","getId","message","guessers","puzzleId","backgroundColor","stopPropagation","Promise","all","fetchDefaults","activepuzzle","PuzzleDisplay","Map","setPuzzleData","fetchInfo","setFetchInfo","studentHistory","setStudentHistory","completedLists","setCompletedLists","showClassroomView","setShowClassroomView","groups","setGroups","activeStudents","useMemo","oldFetchInfo","newFetchInfo","has","set","url","method","JSON","stringify","fetchStudentPuzzleData","puzzleuri","fetchStudentCompletedList","setCompleted","completed","updateHistory","oldHistory","puzzleHistory","instanceHistory","timestamp","Date","now","newHistory","refresh","dataUpdates","completionUpdates","oldPuzzleData","newPuzzleData","oldCompletedLists","newCompletedLists","refreshInterval","setInterval","clearInterval","setStudentFetchInfo","key","info","puzzleDirectory","renderHistory","history","sortedHistory","keys","flatMap","instanceKey","sort","parse","time","toLocaleTimeString","renderPuzzleSelect","directory","displayedData","completedList","ids","hasRecentActivity","puzzleInfo","checked","instance","App","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0bd30b9f.chunk.js","sourcesContent":["import React, { useState } from \"react\";\n\nexport default function StudentList(props) {\n\tconst { students } = props;\n\tconst [displayedStudents, setDisplayedStudents] = useState(students);\n\tconst filter = (event) => {\n\t\tconst query = event.target.value.split(\" \");\n\t\tconst filteredStudents = students.filter(({ first, last }) =>\n\t\t\tquery.every((pattern) => {\n\t\t\t\tconst regexp = new RegExp(pattern, \"i\");\n\t\t\t\treturn first.match(regexp) || last.match(regexp);\n\t\t\t})\n\t\t);\n\t\tsetDisplayedStudents(filteredStudents);\n\t};\n\treturn (\n\t\t<div className=\"student-list-container\">\n\t\t\t<RefreshButton\n\t\t\t\t{...props}\n\t\t\t\tsetDisplayedStudents={setDisplayedStudents}\n\t\t\t/>\n\t\t\t<input type=\"text\" placeholder=\"Filter\" onChange={filter} />\n\t\t\t<ul className=\"student-list\">\n\t\t\t\t{displayedStudents.map(renderStudent.bind(null, props))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n}\n\nfunction RefreshButton({ students, setStudents, setDisplayedStudents }) {\n\tconst fetchStudentList = async () => {\n\t\tconst listurl = `${process.env.REACT_APP_API_URL}/students`;\n\t\tconst response = await fetch(listurl, {\n\t\t\theaders: { authorization: process.env.REACT_APP_INSTRUCTOR_PW },\n\t\t});\n\t\tif (response.ok) {\n\t\t\ttry {\n\t\t\t\tlet list = (await response.json()).map((student) => {\n\t\t\t\t\tconst studentMatch = students.find(\n\t\t\t\t\t\t({ first, last }) =>\n\t\t\t\t\t\t\tfirst === student.first && last === student.last\n\t\t\t\t\t);\n\t\t\t\t\treturn studentMatch || student;\n\t\t\t\t});\n\t\t\t\tsetStudents(list);\n\t\t\t\tsetDisplayedStudents(list);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t} else console.log(\"HTTP error, status = \" + response.status);\n\t};\n\treturn (\n\t\t<button className=\"refresh-students\" onClick={fetchStudentList}>\n\t\t\tRefresh\n\t\t</button>\n\t);\n}\n\nfunction renderStudent({ students, setStudents }, student) {\n\tconst { first, last, active } = student;\n\treturn (\n\t\t<li key={`${first} ${last}`}>\n\t\t\t{capitalize(first)} {capitalize(last)}{\" \"}\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tname=\"active\"\n\t\t\t\tid={`${first}_${last}-active`}\n\t\t\t\tdefaultChecked={active ? true : false}\n\t\t\t\tonChange={() => {\n\t\t\t\t\tstudent.active = !active;\n\t\t\t\t\tsetStudents([...students]);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</li>\n\t);\n}\n\nfunction capitalize(string) {\n\treturn string.replace(/^./, (char) => char.toUpperCase());\n}\n","import React from \"react\";\n\nexport default function Calcudoku({ data }) {\n\tconst { size } = data;\n\tconst grid = generateGrid(data);\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"puzzle-container\" size={size}>\n\t\t\t\t<div className=\"grid-container\" size={size}>\n\t\t\t\t\t{grid.map(renderSquare)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction renderSquare(square) {\n\tconst classList = \"calcudoku-square \" + square.neighbors.join(\" \");\n\treturn (\n\t\t<div className={classList}>\n\t\t\t<div className=\"cage-indicator\">\n\t\t\t\t{square.result}\n\t\t\t\t{square.operation}\n\t\t\t</div>\n\t\t\t<input type=\"number\" value={square.value || \"\"} disabled />\n\t\t</div>\n\t);\n}\n\nfunction generateGrid(puzzleData) {\n\tconst { size, cages, work } = puzzleData;\n\tconst squares = Array(size ** 2).fill(null);\n\treturn squares.map((...[, index]) => {\n\t\tconst col = Math.floor(index / size);\n\t\tconst row = index % size;\n\t\tconst matchSquare = squareMatcher({ col, row });\n\t\tconst entry = work.find(matchSquare);\n\t\tconst cage = cages.find((cage) => cage.squares.find(matchSquare));\n\t\tconst neighbors = neighborList({ col, row }, cage);\n\t\tconst isTopLeft = cage.squares.every(\n\t\t\t(square) =>\n\t\t\t\tsquare.col >= col && (square.row >= row || square.col > col)\n\t\t);\n\t\tconst result = isTopLeft ? cage.result : null;\n\t\tconst operation = isTopLeft ? cage.operation : null;\n\t\tconst value = entry ? entry.value : null;\n\t\treturn { col, row, value, neighbors, result, operation };\n\t});\n}\n\nfunction neighborList(square, cage) {\n\tconst neighbors = [];\n\tconst directions = {\n\t\t\"n-up\": { col: square.col - 1, row: square.row },\n\t\t\"n-down\": { col: square.col + 1, row: square.row },\n\t\t\"n-left\": { col: square.col, row: square.row - 1 },\n\t\t\"n-right\": { col: square.col, row: square.row + 1 },\n\t};\n\n\tfor (let dir in directions) {\n\t\tconst matchSquare = squareMatcher(directions[dir]);\n\t\tif (cage.squares.find(matchSquare)) {\n\t\t\tneighbors.push(dir);\n\t\t}\n\t}\n\n\treturn neighbors;\n}\n\nfunction squareMatcher({ col, row }) {\n\treturn (square) => square.col === col && square.row === row;\n}\n","import React from \"react\";\n\nexport default function Logic({ data: { description, work } }) {\n\treturn (\n\t\t<div className=\"logic\">\n\t\t\t<p className=\"description\">{description}</p>\n\t\t\t<p className=\"work\">{work}</p>\n\t\t</div>\n\t);\n}\n","import React, { useState } from \"react\";\n\nexport default function Light({ data }) {\n\tconst { work } = data;\n\tconst [workPosition, setWorkPosition] = useState(data.workPosition || 0);\n\tconst {\n\t\tsize: { cols, rows },\n\t\tbeginstate,\n\t\tneighborType,\n\t} = data;\n\n\tconst neighborList = ({ row, col }) => {\n\t\tswitch (neighborType) {\n\t\t\tcase \"x\":\n\t\t\t\treturn [\n\t\t\t\t\t{ row: row - 1, col: col - 1 },\n\t\t\t\t\t{ row: row + 1, col: col + 1 },\n\t\t\t\t\t{ row: row + 1, col: col - 1 },\n\t\t\t\t\t{ row: row - 1, col: col + 1 },\n\t\t\t\t\t{ row, col },\n\t\t\t\t];\n\t\t\tdefault:\n\t\t\t\treturn [\n\t\t\t\t\t{ row: row - 1, col },\n\t\t\t\t\t{ row: row + 1, col },\n\t\t\t\t\t{ row, col: col - 1 },\n\t\t\t\t\t{ row, col: col + 1 },\n\t\t\t\t\t{ row, col },\n\t\t\t\t];\n\t\t}\n\t};\n\n\tconst renderSquare = (row, ...[, col]) => {\n\t\tconst neighbors = neighborList({ row, col });\n\t\tconst activatedNeighbors = work\n\t\t\t.slice(0, workPosition)\n\t\t\t.filter((square) => neighbors.some(squareMatcher(square)));\n\t\tconst isactive =\n\t\t\t(activatedNeighbors.length +\n\t\t\t\t(beginstate.some(squareMatcher({ row, col })) ? 1 : 0)) %\n\t\t\t\t2 >\n\t\t\t0;\n\t\tconst classList = `light-square ${isactive ? \"active\" : \"inactive\"}`;\n\t\treturn <div className={classList} />;\n\t};\n\n\tconst renderRow = (...[, index]) => {\n\t\treturn (\n\t\t\t<div className=\"grid-row\">\n\t\t\t\t{Array(cols).fill(null).map(renderSquare.bind(null, index))}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst jumpTo = (position) => setWorkPosition(position);\n\n\treturn (\n\t\t<div className=\"light-puzzle-container\">\n\t\t\t<div className=\"light-grid\" cols={cols} rows={rows}>\n\t\t\t\t{new Array(rows).fill(null).map(renderRow)}\n\t\t\t</div>\n\t\t\t<div className=\"controller\">\n\t\t\t\t<JumpBack jump={() => jumpTo(0)} isactive={workPosition > 0} />\n\t\t\t\t<StepBack\n\t\t\t\t\tstep={() => jumpTo(Math.max(workPosition - 1, 0))}\n\t\t\t\t\tisactive={workPosition > 0}\n\t\t\t\t/>\n\t\t\t\t<StepForward\n\t\t\t\t\tstep={() => jumpTo(Math.min(workPosition + 1, work.length))}\n\t\t\t\t\tisactive={workPosition < work.length}\n\t\t\t\t/>\n\t\t\t\t<JumpForward\n\t\t\t\t\tjump={() => jumpTo(work.length)}\n\t\t\t\t\tisactive={workPosition < work.length}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction squareMatcher({ row, col }) {\n\treturn (square) => square.col === col && square.row === row;\n}\n\nfunction StepBack({ step, isactive }) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"2048\"\n\t\t\theight=\"2048\"\n\t\t\tviewBox=\"0 0 2048 2048\"\n\t\t\tonClick={step}\n\t\t\tclassName=\"step back nav-button\"\n\t\t\tisactive={isactive.toString()}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M1344 576v896q0 26-19 45t-45\n\t\t\t\t19-45-19l-448-448q-19-19-19-45t19-45l448-448q19-19 45-19t45 19\n\t\t\t\t19 45z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nfunction JumpBack({ jump, isactive }) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"2048\"\n\t\t\theight=\"2048\"\n\t\t\tviewBox=\"0 0 2048 2048\"\n\t\t\tonClick={jump}\n\t\t\tclassName=\"jump back nav-button\"\n\t\t\tisactive={isactive.toString()}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M1811 269q19-19 32-13t13 32v1472q0 \n\t\t\t26-13 32t-32-13l-710-710q-8-9-13-19v710q0 \n\t\t\t26-13 32t-32-13l-710-710q-19-19-19-45t19-45l710-710q19-19 \n\t\t\t32-13t13 32v710q5-11 13-19z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nfunction StepForward({ step, isactive }) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"2048\"\n\t\t\theight=\"2048\"\n\t\t\tviewBox=\"0 0 2048 2048\"\n\t\t\tonClick={step}\n\t\t\tclassName=\"step forward nav-button\"\n\t\t\tisactive={isactive.toString()}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M1280 1024q0 26-19 45l-448 448q-19 19-45 \n\t\t\t\t19t-45-19-19-45v-896q0-26 19-45t45-19 45 \n\t\t\t\t19l448 448q19 19 19 45z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n\nfunction JumpForward({ jump, isactive }) {\n\treturn (\n\t\t<svg\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"2048\"\n\t\t\theight=\"2048\"\n\t\t\tviewBox=\"0 0 2048 2048\"\n\t\t\tonClick={jump}\n\t\t\tclassName=\"jump forward nav-button\"\n\t\t\tisactive={isactive.toString()}\n\t\t>\n\t\t\t<path\n\t\t\t\td=\"M237 1779q-19 19-32 13t-13-32v-1472q0-26 13-32t32 13l710 \n\t\t\t\t710q8 8 13 19v-710q0-26 13-32t32 13l710 710q19 19 19 45t-19 \n\t\t\t\t45l-710 710q-19 19-32 13t-13-32v-710q-5 10-13 19z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","import React, { useRef, useEffect, useCallback } from \"react\";\n\nexport default function Matchstick({ data, hideDescription, hideStartPos }) {\n\tconst canvasRef = useRef(null);\n\tconst {\n\t\theight,\n\t\twidth,\n\t\twork,\n\t\tstickWidth,\n\t\tdescription,\n\t\tstartingConfiguration,\n\t} = data;\n\n\tconst draw = useCallback(\n\t\t(ctx) => {\n\t\t\tctx.clearRect(0, 0, width, height);\n\t\t\tctx.beginPath();\n\t\t\tctx.lineWidth = stickWidth;\n\t\t\tctx.lineCap = \"round\";\n\t\t\tif (!hideStartPos) {\n\t\t\t\tctx.strokeStyle = \"#0b032d22\";\n\t\t\t\tfor (let [initial, terminal] of startingConfiguration) {\n\t\t\t\t\tctx.moveTo(initial.x, initial.y);\n\t\t\t\t\tctx.lineTo(terminal.x, terminal.y);\n\t\t\t\t}\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t\tfor (let [initial, terminal] of work) {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.lineWidth = stickWidth;\n\t\t\t\tctx.strokeStyle = \"#0b032d\";\n\t\t\t\tctx.moveTo(initial.x, initial.y);\n\t\t\t\tctx.lineTo(terminal.x, terminal.y);\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t},\n\t\t[work, height, width, stickWidth, startingConfiguration]\n\t);\n\n\tuseEffect(() => {\n\t\tconst canvas = canvasRef.current;\n\t\tconst context = canvas.getContext(\"2d\");\n\t\tdraw(context);\n\t}, [draw]);\n\n\treturn (\n\t\t<div className=\"matchstick\">\n\t\t\t{hideDescription ? null : <p>{description}</p>}\n\t\t\t<canvas\n\t\t\t\tid=\"mathcstick-canvas\"\n\t\t\t\tref={canvasRef}\n\t\t\t\theight={height}\n\t\t\t\twidth={width}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React, { useRef, useEffect } from \"react\";\n\nexport default function Tangram({\n\tdata: {\n\t\theight,\n\t\twidth,\n\t\tselectionProximity,\n\t\tunitLength,\n\t\tobjective,\n\t\tstartingCenter,\n\t\tobjectiveCenter,\n\t\twork,\n\t},\n}) {\n\tconst canvasRef = useRef(null);\n\tuseEffect(() => {\n\t\tconst canvas = canvasRef.current;\n\t\tconst ctx = canvas.getContext(\"2d\");\n\t\tdraw({\n\t\t\tctx,\n\t\t\theight,\n\t\t\twidth,\n\t\t\tshapes: createTangrams({ unitLength, startingCenter, work }),\n\t\t\tobjective,\n\t\t\tobjectiveCenter,\n\t\t\tunitLength,\n\t\t});\n\t}, [\n\t\theight,\n\t\twidth,\n\t\twork,\n\t\tobjective,\n\t\tobjectiveCenter,\n\t\tunitLength,\n\t\tstartingCenter,\n\t]);\n\n\treturn (\n\t\t<div className=\"tangram display-container\">\n\t\t\t<canvas\n\t\t\t\tid=\"tangram-canvas\"\n\t\t\t\tref={canvasRef}\n\t\t\t\theight={height}\n\t\t\t\twidth={width}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nfunction createTangrams({ unitLength, startingCenter, work }) {\n\tconst positions = {\n\t\t...startingConfiguration({ unitLength, startingCenter }),\n\t\t...work,\n\t};\n\treturn [\n\t\tcreateTriangle({\n\t\t\t...positions.largeTriangle1,\n\t\t\tcolor: \"#7d99ed\",\n\t\t\tsize: unitLength * 2,\n\t\t\tname: \"largeTriangle1\",\n\t\t}),\n\t\tcreateTriangle({\n\t\t\t...positions.largeTriangle2,\n\t\t\tcolor: \"#70c2df\",\n\t\t\tsize: unitLength * 2,\n\t\t\tname: \"largeTriangle2\",\n\t\t}),\n\t\tcreateTriangle({\n\t\t\t...positions.mediumTriangle,\n\t\t\tcolor: \"#9edfe5\",\n\t\t\tsize: unitLength * Math.sqrt(2),\n\t\t\tname: \"mediumTriangle\",\n\t\t}),\n\t\tcreateSquare({\n\t\t\t...positions.square,\n\t\t\tcolor: \"#c3ebef\",\n\t\t\tsize: unitLength,\n\t\t}),\n\t\tcreateParallelogram({\n\t\t\t...positions.parallelogram,\n\t\t\tcolor: \"#3f2fa5\",\n\t\t\tsize: unitLength,\n\t\t}),\n\t\tcreateTriangle({\n\t\t\t...positions.smallTriangle1,\n\t\t\tcolor: \"#6146d9\",\n\t\t\tsize: unitLength,\n\t\t\tname: \"smallTriangle1\",\n\t\t}),\n\t\tcreateTriangle({\n\t\t\t...positions.smallTriangle2,\n\t\t\tcolor: \"#7e6cfb\",\n\t\t\tsize: unitLength,\n\t\t\tname: \"smallTriangle2\",\n\t\t}),\n\t];\n}\n\nfunction createVertex({ shape, relAngle, distanceFromCenter }) {\n\tconst vertex = { relAngle };\n\tObject.defineProperty(vertex, \"x\", {\n\t\tget() {\n\t\t\treturn (\n\t\t\t\tshape.center.x +\n\t\t\t\tMath.cos(shape.angle + relAngle) * distanceFromCenter\n\t\t\t);\n\t\t},\n\t});\n\tObject.defineProperty(vertex, \"y\", {\n\t\tget() {\n\t\t\treturn (\n\t\t\t\tshape.center.y +\n\t\t\t\tMath.sin(shape.angle + relAngle) * distanceFromCenter\n\t\t\t);\n\t\t},\n\t});\n\treturn vertex;\n}\n\nfunction createTriangle({ size, center, angle, color, name }) {\n\tconst distanceToClosePoint =\n\t\t(size * Math.sin(Math.PI / 8)) / Math.sin((5 * Math.PI) / 8);\n\tconst distanceToFarPoint =\n\t\t(size * Math.sin(Math.PI / 4)) / Math.sin((5 * Math.PI) / 8);\n\tconst triangle = { center, color, angle, name };\n\ttriangle.vertices = [\n\t\t{ relAngle: 0, distanceFromCenter: distanceToClosePoint },\n\t\t{\n\t\t\trelAngle: (5 * Math.PI) / 8,\n\t\t\tdistanceFromCenter: distanceToFarPoint,\n\t\t},\n\t\t{\n\t\t\trelAngle: -(5 * Math.PI) / 8,\n\t\t\tdistanceFromCenter: distanceToFarPoint,\n\t\t},\n\t].map((vertex) => createVertex({ ...vertex, shape: triangle }));\n\treturn triangle;\n}\n\nfunction createSquare({ size, center, angle, color }) {\n\tconst distanceFromCenter = (size * Math.sqrt(2)) / 2;\n\tconst square = { center, color, angle, name: \"square\" };\n\tsquare.vertices = Array.from({ length: 4 }, (_, i) =>\n\t\tcreateVertex({\n\t\t\tshape: square,\n\t\t\tdistanceFromCenter,\n\t\t\trelAngle: (i * Math.PI) / 2,\n\t\t})\n\t);\n\treturn square;\n}\n\nfunction createParallelogram({ size, center, angle, color }) {\n\tconst distanceToClosePoint = size / 2;\n\tconst distanceToFarPoint = size / Math.sin(Math.atan2(2, 1));\n\tconst parallelogram = { center, color, angle, name: \"parallelogram\" };\n\tparallelogram.vertices = [\n\t\t{ relAngle: 0, distanceFromCenter: distanceToClosePoint },\n\t\t{\n\t\t\trelAngle: -Math.atan2(2, 1),\n\t\t\tdistanceFromCenter: distanceToFarPoint,\n\t\t},\n\t\t{\n\t\t\trelAngle: Math.PI,\n\t\t\tdistanceFromCenter: distanceToClosePoint,\n\t\t},\n\t\t{\n\t\t\trelAngle: -(Math.PI + Math.atan2(2, 1)),\n\t\t\tdistanceFromCenter: distanceToFarPoint,\n\t\t},\n\t].map((vertex) => createVertex({ ...vertex, shape: parallelogram }));\n\n\treturn parallelogram;\n}\n\nfunction startingConfiguration({ startingCenter, unitLength }) {\n\treturn {\n\t\tlargeTriangle1: {\n\t\t\tcenter: {\n\t\t\t\tx: startingCenter.x,\n\t\t\t\ty:\n\t\t\t\t\tstartingCenter.y +\n\t\t\t\t\t(unitLength * 2 * Math.sin(Math.PI / 8)) /\n\t\t\t\t\t\tMath.sin((5 * Math.PI) / 8),\n\t\t\t},\n\t\t\tangle: -Math.PI / 2,\n\t\t},\n\t\tlargeTriangle2: {\n\t\t\tcenter: {\n\t\t\t\tx:\n\t\t\t\t\tstartingCenter.x -\n\t\t\t\t\t(unitLength * 2 * Math.sin(Math.PI / 8)) /\n\t\t\t\t\t\tMath.sin((5 * Math.PI) / 8),\n\t\t\t\ty: startingCenter.y,\n\t\t\t},\n\t\t\tangle: 0,\n\t\t},\n\t\tmediumTriangle: {\n\t\t\tcenter: {\n\t\t\t\tx:\n\t\t\t\t\tstartingCenter.x +\n\t\t\t\t\tunitLength *\n\t\t\t\t\t\t(Math.sqrt(2) -\n\t\t\t\t\t\t\tMath.sin(Math.PI / 8) /\n\t\t\t\t\t\t\t\tMath.sin((Math.PI * 5) / 8)),\n\t\t\t\ty:\n\t\t\t\t\tstartingCenter.y -\n\t\t\t\t\tunitLength *\n\t\t\t\t\t\t(Math.sqrt(2) -\n\t\t\t\t\t\t\tMath.sin(Math.PI / 8) /\n\t\t\t\t\t\t\t\tMath.sin((Math.PI * 5) / 8)),\n\t\t\t},\n\t\t\tangle: -Math.PI / 4,\n\t\t},\n\t\tsquare: {\n\t\t\tcenter: {\n\t\t\t\tx: startingCenter.x,\n\t\t\t\ty: startingCenter.y - (unitLength * Math.sqrt(2)) / 2,\n\t\t\t},\n\t\t\tangle: 0,\n\t\t},\n\t\tparallelogram: {\n\t\t\tcenter: {\n\t\t\t\tx: startingCenter.x + unitLength * ((Math.sqrt(2) * 3) / 4),\n\t\t\t\ty: startingCenter.y + unitLength * (Math.sqrt(2) / 4),\n\t\t\t},\n\t\t\tangle: -Math.PI / 4,\n\t\t},\n\t\tsmallTriangle1: {\n\t\t\tcenter: {\n\t\t\t\tx: startingCenter.x - (unitLength * Math.sqrt(2)) / 2,\n\t\t\t\ty:\n\t\t\t\t\tstartingCenter.y -\n\t\t\t\t\tunitLength *\n\t\t\t\t\t\t(Math.sqrt(2) / 2 +\n\t\t\t\t\t\t\tMath.sin(Math.PI / 8) /\n\t\t\t\t\t\t\t\tMath.sin((Math.PI * 5) / 8)),\n\t\t\t},\n\t\t\tangle: Math.PI / 2,\n\t\t},\n\t\tsmallTriangle2: {\n\t\t\tcenter: {\n\t\t\t\tx:\n\t\t\t\t\tstartingCenter.x +\n\t\t\t\t\tunitLength *\n\t\t\t\t\t\t(Math.sin(Math.PI / 8) / Math.sin((Math.PI * 5) / 8)),\n\t\t\t\ty: startingCenter.y,\n\t\t\t},\n\t\t\tangle: Math.PI,\n\t\t},\n\t};\n}\n\nfunction draw({\n\tctx,\n\twidth,\n\theight,\n\tobjective,\n\tshapes,\n\tvertexSelection,\n\tshapeSelection,\n\tobjectiveCenter,\n\tunitLength,\n}) {\n\tctx.clearRect(0, 0, width, height);\n\tobjective.forEach(\n\t\tdrawObjective.bind(null, ctx, objectiveCenter, unitLength)\n\t);\n\tshapes.forEach(drawShape.bind(null, ctx));\n\tif (vertexSelection) {\n\t\tctx.beginPath();\n\t\tctx.arc(vertexSelection.x, vertexSelection.y, 6, 0, 2 * Math.PI);\n\t\tctx.fillStyle = \"#c1b4fa\";\n\t\tctx.shadowBlur = 4;\n\t\tctx.shadowColor = ctx.fillStyle;\n\t\tctx.fill();\n\t\tctx.shadowBlur = 0;\n\t\tctx.shadowColor = \"#0b032d\";\n\t} else {\n\t\tif (shapeSelection) {\n\t\t\tdrawShape(ctx, {\n\t\t\t\t...shapeSelection,\n\t\t\t\tcolor: \"#c1b4fa\",\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction drawShape(\n\tctx,\n\t{ vertices: [firstVertex, ...vertices], color, center }\n) {\n\tctx.beginPath();\n\tctx.moveTo(firstVertex.x, firstVertex.y);\n\tvertices.forEach((point) => ctx.lineTo(point.x, point.y));\n\tctx.closePath();\n\tctx.fillStyle = color;\n\tctx.fill();\n}\n\nfunction drawObjective(ctx, objectiveCenter, unitLength, objective) {\n\tconst adjustedObjective = objective.map(([x, y]) => [\n\t\tobjectiveCenter.x + unitLength * x,\n\t\tobjectiveCenter.y + unitLength * y,\n\t]);\n\tctx.beginPath();\n\tconst [objectiveStart, ...objectivePoints] = adjustedObjective;\n\tctx.moveTo(...objectiveStart);\n\tobjectivePoints.forEach((point) => ctx.lineTo(...point));\n\tctx.closePath();\n\tctx.fillStyle = \"#0b032d\";\n\tctx.fill();\n}\n","import React, { useRef, useEffect, useCallback } from \"react\";\n\nconst height = 1024;\nconst width = 1024;\nconst stickWidth = 6;\n\nexport default function StickImage({ data }) {\n\tconst canvasRef = useRef(null);\n\tconst { work } = data;\n\n\tconst draw = useCallback(\n\t\t(ctx) => {\n\t\t\tctx.clearRect(0, 0, width, height);\n\t\t\tctx.beginPath();\n\t\t\tctx.lineWidth = stickWidth;\n\t\t\tctx.lineCap = \"round\";\n\t\t\tctx.stroke();\n\t\t\tfor (let [initial, terminal] of work) {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.lineWidth = stickWidth;\n\t\t\t\tctx.strokeStyle = \"#0b032d\";\n\t\t\t\tctx.moveTo(initial.x, initial.y);\n\t\t\t\tctx.lineTo(terminal.x, terminal.y);\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t},\n\t\t[work]\n\t);\n\n\tuseEffect(() => {\n\t\tconst canvas = canvasRef.current;\n\t\tconst context = canvas.getContext(\"2d\");\n\t\tdraw(context);\n\t}, [draw]);\n\n\treturn (\n\t\t<div className=\"stick-image-guess\">\n\t\t\t<canvas\n\t\t\t\tstyle={{ height: 256, width: 256 }}\n\t\t\t\tid=\"mandelbrot-canvas\"\n\t\t\t\tref={canvasRef}\n\t\t\t\theight={height}\n\t\t\t\twidth={width}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","import React, { useRef, useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport Calcudoku from \"./templates/calcudoku\";\nimport Logic from \"./templates/logic\";\nimport Light from \"./templates/light\";\nimport Matchstick from \"./templates/matchstick\";\nimport Tangram from \"./templates/tangram\";\n\nconst puzzleComponents = {\n\tcalcudoku: (data) => <Calcudoku data={data} />,\n\tlogic: (data) => <Logic data={data} />,\n\tlight: (data) => <Light data={data} />,\n\tmatchstick: (data) => (\n\t\t<Matchstick data={data} hideDescription={true} hideStartPos={true} />\n\t),\n\ttangram: (data) => <Tangram data={data} />,\n};\n\nfunction ViewWindow({ children }) {\n\tconst containerRef = useRef(document.createElement(\"div\"));\n\n\tuseEffect(() => {\n\t\tconst viewWindow = window.open(\"\");\n\t\tviewWindow.document.body.appendChild(containerRef.current);\n\t\tcopyStyles(document, viewWindow.document);\n\t\treturn () => viewWindow.close();\n\t}, []);\n\n\treturn createPortal(children, containerRef.current);\n}\n\nexport default function ClassroomView({\n\tshowStudentNames,\n\tpuzzleData,\n\tstudents,\n}) {\n\tconst renderStudentPuzzle = (student) => {\n\t\tconst { puzzleName, ...data } = puzzleData.get(student) || {};\n\t\tconst render = puzzleComponents[puzzleName];\n\t\treturn render ? (\n\t\t\t<div className=\"student-puzzle\">{render(data)}</div>\n\t\t) : null;\n\t};\n\n\treturn (\n\t\t<ViewWindow>\n\t\t\t<ul className=\"classroom-view\">\n\t\t\t\t{students.map((student) => {\n\t\t\t\t\tconst { first, last } = student;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={`${first}_${last}`}>\n\t\t\t\t\t\t\t{showStudentNames ? (\n\t\t\t\t\t\t\t\t<div className=\"student-name\">\n\t\t\t\t\t\t\t\t\t{capitalize(first)} {capitalize(last)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{renderStudentPuzzle(student)}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t</ViewWindow>\n\t);\n}\n\nfunction capitalize(string) {\n\treturn string.replace(/(?<=\\W|^)./g, (char) => char.toUpperCase());\n}\n\nfunction copyStyles(sourceDoc, targetDoc) {\n\tArray.from(sourceDoc.styleSheets).forEach((styleSheet) => {\n\t\ttry {\n\t\t\tif (styleSheet.cssRules) {\n\t\t\t\tconst newStyleEl = sourceDoc.createElement(\"style\");\n\n\t\t\t\tArray.from(styleSheet.cssRules).forEach((cssRule) => {\n\t\t\t\t\tnewStyleEl.appendChild(\n\t\t\t\t\t\tsourceDoc.createTextNode(cssRule.cssText)\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\ttargetDoc.head.appendChild(newStyleEl);\n\t\t\t} else {\n\t\t\t\tconst newLinkEl = sourceDoc.createElement(\"link\");\n\n\t\t\t\tnewLinkEl.rel = \"stylesheet\";\n\t\t\t\tnewLinkEl.href = styleSheet.href;\n\t\t\t\ttargetDoc.head.appendChild(newLinkEl);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// console.log(e);\n\t\t}\n\t});\n}\n","import React, { useState } from \"react\";\n\nexport default function Group({\n\tgroupNumber,\n\trenderStudentDisplay,\n\tstudentList,\n\tpostStudentMessage,\n\tdeleteStudentMessages,\n}) {\n\tconst members = () =>\n\t\tstudentList.filter(({ group }) => group === groupNumber);\n\tconst [designer, setDesigner] = useState(null);\n\n\tfunction renderStudent(student) {\n\t\tconst { first, last, group } = student;\n\t\treturn (\n\t\t\t<li\n\t\t\t\tkey={`${first} ${last}`}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tif (group === groupNumber) {\n\t\t\t\t\t\tif (designer === student) setDesigner(null);\n\t\t\t\t\t\tdeleteStudentMessages(student, {\n\t\t\t\t\t\t\tpuzzleName: \"stick-image\",\n\t\t\t\t\t\t\tpuzzleId: \"workspace\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdelete student.group;\n\t\t\t\t\t\tsendMessages();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstudent.group = groupNumber;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tstyle={group === groupNumber ? { backgroundColor: \"#aaa\" } : {}}\n\t\t\t>\n\t\t\t\t{capitalize(first)} {capitalize(last)}{\" \"}\n\t\t\t\t<span\n\t\t\t\t\tclassName={`completed-check ${\n\t\t\t\t\t\tdesigner === student ? \"complete\" : \"incomplete\"\n\t\t\t\t\t}`}\n\t\t\t\t\tonClick={async (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tif (student.group === groupNumber) {\n\t\t\t\t\t\t\tsetDesigner(student);\n\t\t\t\t\t\t\tawait Promise.all(\n\t\t\t\t\t\t\t\tmembers().map(\n\t\t\t\t\t\t\t\t\tasync (student) =>\n\t\t\t\t\t\t\t\t\t\tawait deleteStudentMessages(student, {\n\t\t\t\t\t\t\t\t\t\t\tpuzzleName: \"stick-image\",\n\t\t\t\t\t\t\t\t\t\t\tpuzzleId: \"workspace\",\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsendMessages(student);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{designer === student ? \"\\u2713\" : \"\\u25EF\"}\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t);\n\t}\n\n\tfunction sendMessages(newDesigner = designer) {\n\t\tconst getId = ({ first, last }) => `${first}_${last}`;\n\t\tconst message = {\n\t\t\tdesigner: newDesigner ? getId(newDesigner) : \"no_designer\",\n\t\t\tguessers: members()\n\t\t\t\t.filter((student) => student !== newDesigner)\n\t\t\t\t.map(getId),\n\t\t};\n\t\tmembers().forEach((student) => {\n\t\t\tpostStudentMessage(student, message, {\n\t\t\t\tpuzzleName: \"stick-image\",\n\t\t\t\tpuzzleId: \"workspace\",\n\t\t\t});\n\t\t});\n\t}\n\n\treturn (\n\t\t<div className=\"group\">\n\t\t\t<ul className=\"student-list\">{studentList.map(renderStudent)}</ul>\n\t\t\t<button onClick={sendMessages}>Set Group</button>\n\t\t\t<ul className=\"puzzle-display\">\n\t\t\t\t{members().map(renderStudentDisplay)}\n\t\t\t</ul>\n\t\t\t<hr />\n\t\t</div>\n\t);\n}\n\nfunction capitalize(string) {\n\treturn string.replace(/^./, (char) => char.toUpperCase());\n}\n","import React, { useEffect, useState, useCallback, useMemo } from \"react\";\n\nimport Calcudoku from \"./templates/calcudoku\";\nimport Logic from \"./templates/logic\";\nimport Light from \"./templates/light\";\nimport Matchstick from \"./templates/matchstick\";\nimport Tangram from \"./templates/tangram\";\nimport StickImage from \"./templates/stick-image\";\n\nimport ClassroomView from \"./classroom-view\";\nimport Group from \"./group\";\n\nconst puzzleComponents = {\n\tcalcudoku: (data) => <Calcudoku data={data} />,\n\tlogic: (data) => <Logic data={data} />,\n\tlight: (data) => <Light data={data} />,\n\tmatchstick: (data) => <Matchstick data={data} />,\n\ttangram: (data) => <Tangram data={data} />,\n\t\"stick-image\": (data) => <StickImage data={data} />,\n};\n\nconst fetchDefaults = {\n\tactivepuzzle: true,\n\tpuzzleName: \"calcudoku\",\n\tpuzzleId: \"4x4beginner1\",\n};\n\nexport default function PuzzleDisplay(props) {\n\tconst [puzzleData, setPuzzleData] = useState(new Map());\n\tconst [fetchInfo, setFetchInfo] = useState(new Map());\n\tconst [studentHistory, setStudentHistory] = useState(new Map());\n\tconst [completedLists, setCompletedLists] = useState(new Map());\n\tconst [showClassroomView, setShowClassroomView] = useState(false);\n\tconst [groups, setGroups] = useState(0);\n\tconst activeStudents = useMemo(\n\t\t() => props.students.filter((student) => student.active),\n\t\t[props.students]\n\t);\n\n\t//set defaults for newly fetched students\n\tuseEffect(() => {\n\t\tsetFetchInfo((oldFetchInfo) => {\n\t\t\tconst newFetchInfo = new Map(oldFetchInfo);\n\t\t\tprops.students.forEach((student) => {\n\t\t\t\tif (!newFetchInfo.has(student))\n\t\t\t\t\tnewFetchInfo.set(student, fetchDefaults);\n\t\t\t});\n\t\t\treturn newFetchInfo;\n\t\t});\n\t}, [props.students, setFetchInfo]);\n\n\tconst deleteStudentMessages = useCallback(\n\t\tasync (\n\t\t\tstudent,\n\t\t\t{ puzzleName, puzzleId } = fetchInfo.get(student)\n\t\t) => {\n\t\t\tconst { first, last } = student;\n\t\t\tconst url =\n\t\t\t\tprocess.env.REACT_APP_API_URL +\n\t\t\t\t`/students/${first}_${last}/` +\n\t\t\t\t`${puzzleName}/${puzzleId}/` +\n\t\t\t\t\"messages\";\n\t\t\tawait fetch(url, {\n\t\t\t\tmethod: \"DELETE\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ id: \"instructor\" }),\n\t\t\t});\n\t\t},\n\t\t[fetchInfo]\n\t);\n\n\tconst postStudentMessage = useCallback(\n\t\tasync (\n\t\t\tstudent,\n\t\t\tmessage,\n\t\t\t{ puzzleName, puzzleId } = fetchInfo.get(student)\n\t\t) => {\n\t\t\tconst { first, last } = student;\n\t\t\tconst url =\n\t\t\t\tprocess.env.REACT_APP_API_URL +\n\t\t\t\t`/students/${first}_${last}/` +\n\t\t\t\t`${puzzleName}/${puzzleId}/` +\n\t\t\t\t\"messages\";\n\t\t\tfetch(url, {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ id: \"instructor\", message }),\n\t\t\t});\n\t\t},\n\t\t[fetchInfo]\n\t);\n\n\tconst fetchStudentPuzzleData = useCallback(\n\t\tasync (student) => {\n\t\t\tconst { first, last } = student;\n\t\t\tconst { activepuzzle, puzzleName, puzzleId } = fetchInfo.get(\n\t\t\t\tstudent\n\t\t\t);\n\t\t\tconst puzzleuri = activepuzzle\n\t\t\t\t? \"activepuzzle\"\n\t\t\t\t: `${puzzleName}/${puzzleId}`;\n\t\t\tconst url =\n\t\t\t\tprocess.env.REACT_APP_API_URL +\n\t\t\t\t`/students/${first}_${last}/${puzzleuri}`;\n\t\t\tconst response = await fetch(url, {\n\t\t\t\theaders: { authorization: process.env.REACT_APP_INSTRUCTOR_PW },\n\t\t\t});\n\t\t\treturn await response.json();\n\t\t},\n\t\t[fetchInfo]\n\t);\n\n\tconst fetchStudentCompletedList = useCallback(\n\t\tasync (student) => {\n\t\t\tconst { first, last } = student;\n\t\t\tconst { puzzleName } = fetchInfo.get(student);\n\t\t\tconst url =\n\t\t\t\tprocess.env.REACT_APP_API_URL +\n\t\t\t\t`/students/${first}_${last}/${puzzleName}/completed`;\n\t\t\tconst response = await fetch(url, {\n\t\t\t\theaders: { authorization: process.env.REACT_APP_INSTRUCTOR_PW },\n\t\t\t});\n\t\t\treturn await response.json();\n\t\t},\n\t\t[fetchInfo]\n\t);\n\n\tconst setCompleted = useCallback(\n\t\tasync (student, completed) => {\n\t\t\tconst { first, last } = student;\n\t\t\tconst { puzzleName, puzzleId } = puzzleData.get(student);\n\t\t\tconst url =\n\t\t\t\tprocess.env.REACT_APP_API_URL +\n\t\t\t\t`/students/${first}_${last}/${puzzleName}/${puzzleId}/completed`;\n\t\t\tfetch(url, {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t\tauthorization: process.env.REACT_APP_INSTRUCTOR_PW,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ completed }),\n\t\t\t});\n\t\t},\n\t\t[puzzleData]\n\t);\n\n\tconst updateHistory = useCallback(\n\t\tasync (student) => {\n\t\t\tconst { first, last } = student;\n\t\t\tconst url =\n\t\t\t\tprocess.env.REACT_APP_API_URL +\n\t\t\t\t`/students/${first}_${last}/activepuzzle`;\n\t\t\tconst response = await fetch(url, {\n\t\t\t\theaders: { authorization: process.env.REACT_APP_INSTRUCTOR_PW },\n\t\t\t});\n\t\t\tconst {\n\t\t\t\tpuzzleName,\n\t\t\t\tpuzzleId,\n\t\t\t\t...puzzleData\n\t\t\t} = await response.json();\n\t\t\tif (!puzzleName) return;\n\t\t\tsetStudentHistory((oldHistory) => {\n\t\t\t\tconst studentHistory = oldHistory.get(student) || {};\n\t\t\t\tconst puzzleHistory = studentHistory[puzzleName] || {};\n\t\t\t\tconst instanceHistory = puzzleHistory[puzzleId] || [];\n\t\t\t\tconst isNewData =\n\t\t\t\t\t!instanceHistory[0] ||\n\t\t\t\t\tJSON.stringify({ puzzleId, ...puzzleData }) !==\n\t\t\t\t\t\tJSON.stringify(instanceHistory[0].data);\n\t\t\t\tif (isNewData) {\n\t\t\t\t\tpuzzleHistory[puzzleId] = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata: { puzzleId, ...puzzleData },\n\t\t\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t...instanceHistory,\n\t\t\t\t\t];\n\t\t\t\t\tstudentHistory[puzzleName] = puzzleHistory;\n\t\t\t\t\tconst newHistory = new Map(oldHistory);\n\t\t\t\t\tnewHistory.set(student, studentHistory);\n\t\t\t\t\treturn newHistory;\n\t\t\t\t} else {\n\t\t\t\t\treturn oldHistory;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[setStudentHistory]\n\t);\n\n\tconst refresh = useCallback(async () => {\n\t\tconst [dataUpdates, completionUpdates] = await Promise.all([\n\t\t\tPromise.all(\n\t\t\t\tactiveStudents.map(async (student) => {\n\t\t\t\t\tupdateHistory(student);\n\t\t\t\t\tconst data = await fetchStudentPuzzleData(student);\n\t\t\t\t\treturn [student, data];\n\t\t\t\t})\n\t\t\t),\n\t\t\tPromise.all(\n\t\t\t\tactiveStudents.map(async (student) => {\n\t\t\t\t\tconst list = await fetchStudentCompletedList(student);\n\t\t\t\t\treturn [student, list];\n\t\t\t\t})\n\t\t\t),\n\t\t]);\n\t\tsetPuzzleData((oldPuzzleData) => {\n\t\t\tconst newPuzzleData = new Map(oldPuzzleData);\n\t\t\tdataUpdates.forEach((data) => newPuzzleData.set(...data));\n\t\t\treturn newPuzzleData;\n\t\t});\n\n\t\tsetCompletedLists((oldCompletedLists) => {\n\t\t\tconst newCompletedLists = new Map(oldCompletedLists);\n\t\t\tcompletionUpdates.forEach((data) => newCompletedLists.set(...data));\n\t\t\treturn newCompletedLists;\n\t\t});\n\t\tconsole.log(\"refreshed\");\n\t}, [\n\t\tactiveStudents,\n\t\tsetPuzzleData,\n\t\tfetchStudentPuzzleData,\n\t\tupdateHistory,\n\t\tsetCompletedLists,\n\t\tfetchStudentCompletedList,\n\t]);\n\n\t//refresh puzzle data\n\tuseEffect(() => {\n\t\trefresh();\n\t\tconst refreshInterval = setInterval(refresh, 2000);\n\t\treturn () => clearInterval(refreshInterval);\n\t}, [refresh]);\n\n\tconst setStudentFetchInfo = (student, key, value) => {\n\t\tconst info = { ...fetchInfo.get(student) };\n\t\tinfo[key] = value;\n\t\tif (key === \"puzzleName\") {\n\t\t\tinfo.puzzleId = props.puzzleDirectory[value][0];\n\t\t}\n\t\tconst newFetchInfo = new Map(fetchInfo);\n\t\tnewFetchInfo.set(student, info);\n\t\tsetFetchInfo(newFetchInfo);\n\t};\n\n\tconst renderStudentPuzzle = (student) => {\n\t\tconst { puzzleName, completed, ...data } =\n\t\t\tpuzzleData.get(student) || {};\n\t\tconst render = puzzleComponents[puzzleName];\n\t\treturn render ? (\n\t\t\t<div className=\"student-puzzle\">\n\t\t\t\t{render(data)}\n\t\t\t\t<div className=\"completion\">\n\t\t\t\t\tCompleted:{\" \"}\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={`completed-check ${\n\t\t\t\t\t\t\tcompleted ? \"complete\" : \"incomplete\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tonClick={() => setCompleted(student, !completed)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{completed ? \"\\u2713\" : \"\\u25EF\"}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : null;\n\t};\n\n\tconst renderHistory = (student) => {\n\t\tconst history = studentHistory.get(student);\n\t\tif (!history) return null;\n\t\tconst { first, last } = student;\n\t\tconst sortedHistory = Object.keys(history)\n\t\t\t.flatMap((key) =>\n\t\t\t\tObject.keys(history[key]).map((instanceKey) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tdata: { puzzleId },\n\t\t\t\t\t\ttimestamp,\n\t\t\t\t\t} = history[key][instanceKey][0];\n\t\t\t\t\treturn { puzzleName: key, puzzleId, timestamp };\n\t\t\t\t})\n\t\t\t)\n\t\t\t.sort(({ timestamp: a }, { timestamp: b }) => (a > b ? -1 : 1));\n\t\treturn (\n\t\t\t<select\n\t\t\t\tname=\"history-select\"\n\t\t\t\tclassName=\"history-select\"\n\t\t\t\tid={`history-${first}-${last}`}\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tconst { puzzleName, puzzleId } = JSON.parse(e.target.value);\n\t\t\t\t\tsetStudentFetchInfo(student, \"puzzleName\", puzzleName);\n\t\t\t\t\tsetStudentFetchInfo(student, \"puzzleId\", puzzleId);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{sortedHistory.map(({ puzzleName, puzzleId, timestamp }) => {\n\t\t\t\t\tconst time = new Date(timestamp).toLocaleTimeString();\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<option\n\t\t\t\t\t\t\tvalue={JSON.stringify({ puzzleName, puzzleId })}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{puzzleId} {time}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</select>\n\t\t);\n\t};\n\n\tconst renderPuzzleSelect = (student) => {\n\t\tconst directory = props.puzzleDirectory;\n\t\tconst { puzzleName } = fetchInfo.get(student);\n\t\tconst displayedData = puzzleData.get(student);\n\t\tconst completedList = completedLists.get(student);\n\t\tconst ids = puzzleName ? directory[puzzleName] : [];\n\t\treturn (\n\t\t\t<div className=\"puzzle-select\">\n\t\t\t\t<select\n\t\t\t\t\tname=\"type-select\"\n\t\t\t\t\tid=\"type-select\"\n\t\t\t\t\tvalue={puzzleName}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tsetStudentFetchInfo(\n\t\t\t\t\t\t\tstudent,\n\t\t\t\t\t\t\t\"puzzleName\",\n\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{Object.keys(directory).map((type) => (\n\t\t\t\t\t\t<option value={type}>{type}</option>\n\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t\t<ul>\n\t\t\t\t\t{ids.map((id) => {\n\t\t\t\t\t\tconst completed = completedList\n\t\t\t\t\t\t\t? completedLists.get(student)[id]\n\t\t\t\t\t\t\t: false;\n\t\t\t\t\t\tconst active = displayedData\n\t\t\t\t\t\t\t? displayedData.puzzleId === id\n\t\t\t\t\t\t\t: false;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\tsetStudentFetchInfo(student, \"puzzleId\", id)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName={active ? \"active\" : \"\"}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName={`completed-check ${\n\t\t\t\t\t\t\t\t\t\tcompleted ? \"complete\" : \"incomplete\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\tsetCompleted(student, !completed)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{completed ? \"\\u2713\" : \"\\u25CB \"}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{id}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst hasRecentActivity = (student) => {\n\t\tconst history = studentHistory.get(student) || {};\n\t\treturn Object.keys(history).some((key) =>\n\t\t\tObject.keys(history[key]).some((instanceKey) => {\n\t\t\t\tconst { timestamp } = history[key][instanceKey][0];\n\t\t\t\treturn Date.now() - timestamp < 60000;\n\t\t\t})\n\t\t);\n\t};\n\n\tconst renderStudentDisplay = (student) => {\n\t\tconst { first, last } = student;\n\t\tconst puzzleInfo = fetchInfo.get(student);\n\t\tconst activepuzzle = puzzleInfo ? puzzleInfo.activepuzzle : null;\n\t\treturn (\n\t\t\t<li key={`${first}_${last}`} className=\"student-display\">\n\t\t\t\t<div className=\"student-header\">\n\t\t\t\t\t<div className=\"student-name\">\n\t\t\t\t\t\t{capitalize(first)} {capitalize(last)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"activity-indicator\">\n\t\t\t\t\t\t{hasRecentActivity(student) ? null : \"Inactive\"}\n\t\t\t\t\t</div>\n\t\t\t\t\t{renderHistory(student)}\n\t\t\t\t\t<div className=\"show-active\">\n\t\t\t\t\t\tShow Active Puzzle:\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tname=\"active\"\n\t\t\t\t\t\t\tid={`${first}_${last}-active`}\n\t\t\t\t\t\t\tchecked={activepuzzle ? true : false}\n\t\t\t\t\t\t\tonChange={() =>\n\t\t\t\t\t\t\t\tsetStudentFetchInfo(\n\t\t\t\t\t\t\t\t\tstudent,\n\t\t\t\t\t\t\t\t\t\"activepuzzle\",\n\t\t\t\t\t\t\t\t\t!activepuzzle\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{renderPuzzleSelect(student)}\n\t\t\t\t{renderStudentPuzzle(student)}\n\t\t\t</li>\n\t\t);\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<button onClick={() => setShowClassroomView(!showClassroomView)}>\n\t\t\t\tClassroom View\n\t\t\t</button>\n\t\t\t{showClassroomView ? (\n\t\t\t\t<ClassroomView\n\t\t\t\t\tshowStudentNames={false}\n\t\t\t\t\tpuzzleData={puzzleData}\n\t\t\t\t\tstudents={activeStudents}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t\t<button onClick={() => setGroups(groups + 1)}>Add Group</button>\n\t\t\t<button\n\t\t\t\tonClick={() => {\n\t\t\t\t\tactiveStudents.forEach((student) => {\n\t\t\t\t\t\tif (student.group === groups) delete student.group;\n\t\t\t\t\t});\n\t\t\t\t\tsetGroups(groups - 1);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\tRemove Group\n\t\t\t</button>\n\t\t\t{Array.from({ length: groups }, (group, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Group\n\t\t\t\t\t\tgroupNumber={index + 1}\n\t\t\t\t\t\tstudentList={activeStudents}\n\t\t\t\t\t\trenderStudentDisplay={renderStudentDisplay}\n\t\t\t\t\t\tpostStudentMessage={postStudentMessage}\n\t\t\t\t\t\tdeleteStudentMessages={deleteStudentMessages}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t<ul className=\"puzzle-display\">\n\t\t\t\t{activeStudents\n\t\t\t\t\t.filter((student) => !student.group)\n\t\t\t\t\t.map(renderStudentDisplay)}\n\t\t\t</ul>\n\t\t</div>\n\t);\n}\n\nfunction capitalize(string) {\n\treturn string.replace(/^./, (char) => char.toUpperCase());\n}\n","import React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport StudentList from \"./student-list\";\nimport PuzzleDisplay from \"./puzzle-display\";\n\nimport \"./stylesheets/index.css\";\n\nconst puzzleDirectory = {\n\tcalcudoku: [\n\t\t\"4x4beginner1\",\n\t\t\"4x4beginner2\",\n\t\t\"4x4beginner3\",\n\t\t\"4x4beginner4\",\n\t\t\"4x4beginner5\",\n\t\t\"4x4intermediate1\",\n\t\t\"4x4intermediate2\",\n\t\t\"4x4intermediate3\",\n\t\t\"4x4intermediate4\",\n\t\t\"4x4expert1\",\n\t\t\"4x4expert2\",\n\t\t\"4x4expert3\",\n\t\t\"5x5beginner1\",\n\t\t\"5x5beginner2\",\n\t\t\"5x5intermediate1\",\n\t],\n\tlogic: [\n\t\t\"wolfgoatcabbage\",\n\t\t\"torch\",\n\t\t\"goldboxes\",\n\t\t\"10coins\",\n\t\t\"socks\",\n\t\t\"childrenboat\",\n\t\t\"applesandoranges\",\n\t\t\"averybobbycam\",\n\t\t\"bear\",\n\t\t\"hats\",\n\t],\n\tlight: [\n\t\t\"small\",\n\t\t\"medium\",\n\t\t\"large\",\n\t\t\"smallx\",\n\t\t\"mediumx\",\n\t\t\"largex\",\n\t].flatMap((instance) =>\n\t\tArray.from({ length: 5 }, (...[, i]) => `${instance}${i + 1}`)\n\t),\n\tmatchstick: [\n\t\t\"fish\",\n\t\t\"donkey\",\n\t\t\"squares1\",\n\t\t\"squares2\",\n\t\t\"squares3\",\n\t\t\"squares4\",\n\t\t\"squares5\",\n\t],\n\ttangram: [\n\t\t\"triangle\",\n\t\t\"rectangle\",\n\t\t\"trapezoid\",\n\t\t\"twotriangles\",\n\t\t\"twosquares\",\n\t\t\"cube\",\n\t\t\"hexagon\",\n\t\t\"incompleterectangle\",\n\t],\n\t\"stick-image\": [\"workspace\"],\n};\n\nfunction App() {\n\tconst [students, setStudents] = useState([]);\n\treturn (\n\t\t<div className=\"app\">\n\t\t\t<StudentList students={students} setStudents={setStudents} />\n\t\t\t<PuzzleDisplay\n\t\t\t\tstudents={students}\n\t\t\t\tpuzzleDirectory={puzzleDirectory}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\n//---------\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n"],"sourceRoot":""}